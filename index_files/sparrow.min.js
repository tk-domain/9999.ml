!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Sparrow=e()}}(function(){var define,module,exports;return function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function c(){y&&h&&(y=!1,h.length?v=h.concat(v):m=-1,v.length&&u())}function u(){if(!y){var e=i(c);y=!0;for(var t=v.length;t;){for(h=v,v=[];++m<t;)h&&h[m].run();m=-1,t=v.length}h=null,y=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,v=[],y=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||y||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],2:[function(e,t,n){(function(r,o){!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.ES6Promise=r()}(this,function(){"use strict";function t(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"==typeof e}function i(){return void 0!==R?function(){R(c)}:a()}function a(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<N;e+=2)(0,J[e])(J[e+1]),J[e]=void 0,J[e+1]=void 0;N=0}function u(e,t){var n=arguments,r=this,o=new this.constructor(l);void 0===o[K]&&T(o);var i=r._state;return i?function(){var e=n[i-1];U(function(){return E(i,o,e,r._result)})}():_(r,o,e,t),o}function s(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(l);return w(n,e),n}function l(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function p(e){try{return e.then}catch(e){return Z.error=e,Z}}function h(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function v(e,t,n){U(function(e){var r=!1,o=h(n,t,function(n){r||(r=!0,t!==n?w(e,n):b(e,n))},function(t){r||(r=!0,x(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,x(e,o))},e)}function y(e,t){t._state===G?b(e,t._result):t._state===Q?x(e,t._result):_(t,void 0,function(t){return w(e,t)},function(t){return x(e,t)})}function m(e,t,r){t.constructor===e.constructor&&r===u&&t.constructor.resolve===s?y(e,t):r===Z?(x(e,Z.error),Z.error=null):void 0===r?b(e,t):n(r)?v(e,t,r):b(e,t)}function w(e,n){e===n?x(e,f()):t(n)?m(e,n,p(n)):b(e,n)}function g(e){e._onerror&&e._onerror(e._result),k(e)}function b(e,t){e._state===z&&(e._result=t,e._state=G,0!==e._subscribers.length&&U(k,e))}function x(e,t){e._state===z&&(e._state=Q,e._result=t,U(g,e))}function _(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+G]=n,o[i+Q]=r,0===i&&e._state&&U(k,e)}function k(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?E(n,r,o,i):o(i);e._subscribers.length=0}}function S(){this.error=null}function C(e,t){try{return e(t)}catch(e){return $.error=e,$}}function E(e,t,r,o){var i=n(r),a=void 0,c=void 0,u=void 0,s=void 0;if(i){if((a=C(r,o))===$?(s=!0,c=a.error,a.error=null):u=!0,t===a)return void x(t,d())}else a=o,u=!0;t._state!==z||(i&&u?w(t,a):s?x(t,c):e===G?b(t,a):e===Q&&x(t,a))}function j(e,t){try{t(function(t){w(e,t)},function(t){x(e,t)})}catch(t){x(e,t)}}function A(){return ee++}function T(e){e[K]=ee++,e._state=void 0,e._result=void 0,e._subscribers=[]}function O(e,t){this._instanceConstructor=e,this.promise=new e(l),this.promise[K]||T(this.promise),L(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&b(this.promise,this._result))):x(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[K]=A(),this._result=this._state=void 0,this._subscribers=[],l!==e&&("function"!=typeof e&&I(),this instanceof H?j(this,e):D())}var P=void 0,L=P=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},N=0,R=void 0,q=void 0,U=function(e,t){J[N]=e,J[N+1]=t,2===(N+=2)&&(q?q(c):Y())},W="undefined"!=typeof window?window:void 0,F=W||{},V=F.MutationObserver||F.WebKitMutationObserver,B="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),Y=void 0;Y=B?function(){return r.nextTick(c)}:V?function(){var e=0,t=new V(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():X?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===W&&"function"==typeof e?function(){try{var t=e("vertx");return R=t.runOnLoop||t.runOnContext,i()}catch(e){return a()}}():a();var K=Math.random().toString(36).substring(16),z=void 0,G=1,Q=2,Z=new S,$=new S,ee=0;return O.prototype._enumerate=function(e){for(var t=0;this._state===z&&t<e.length;t++)this._eachEntry(e[t],t)},O.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===s){var o=p(e);if(o===u&&e._state!==z)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===H){var i=new n(l);m(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},O.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===z&&(this._remaining--,e===Q?x(r,n):this._result[t]=n),0===this._remaining&&b(r,this._result)},O.prototype._willSettleAt=function(e,t){var n=this;_(e,void 0,function(e){return n._settledAt(G,t,e)},function(e){return n._settledAt(Q,t,e)})},H.all=function(e){return new O(this,e).promise},H.race=function(e){var t=this;return new t(L(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},H.resolve=s,H.reject=function(e){var t=new this(l);return x(t,e),t},H._setScheduler=function(e){q=e},H._setAsap=function(e){U=e},H._asap=U,H.prototype={constructor:H,then:u,catch:function(e){return this.then(null,e)}},H.polyfill=function(){var e=void 0;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=H},H.Promise=H,H})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],3:[function(e,t,n){!function(e,r){"object"==typeof n&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof n?n.inView=r():e.inView=r()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2));e.exports=r.default},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(9)),i=r(n(3)),a=n(4);t.default=function(){if("undefined"!=typeof window){var e=["scroll","resize","load"],t={history:[]},n={offset:{},threshold:0,test:a.inViewport},r=(0,o.default)(function(){t.history.forEach(function(e){t[e].check()})},100);e.forEach(function(e){return addEventListener(e,r)}),window.MutationObserver&&addEventListener("DOMContentLoaded",function(){new MutationObserver(r).observe(document.body,{attributes:!0,childList:!0,subtree:!0})});var c=function(e){if("string"==typeof e){var r=[].slice.call(document.querySelectorAll(e));return t.history.indexOf(e)>-1?t[e].elements=r:(t[e]=(0,i.default)(r,n),t.history.push(e)),t[e]}};return c.offset=function(e){if(void 0===e)return n.offset;var t=function(e){return"number"==typeof e};return["top","right","bottom","left"].forEach(t(e)?function(t){return n.offset[t]=e}:function(r){return t(e[r])?n.offset[r]=e[r]:null}),n.offset},c.threshold=function(e){return"number"==typeof e&&e>=0&&e<=1?n.threshold=e:n.threshold},c.test=function(e){return"function"==typeof e?n.test=e:n.test},c.is=function(e){return n.test(e,n)},c.offset(0),c}}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,r){n(this,e),this.options=r,this.elements=t,this.current=[],this.handlers={enter:[],exit:[]},this.singles={enter:[],exit:[]}}return r(e,[{key:"check",value:function(){var e=this;return this.elements.forEach(function(t){var n=e.options.test(t,e.options),r=e.current.indexOf(t),o=r>-1,i=n&&!o,a=!n&&o;i&&(e.current.push(t),e.emit("enter",t)),a&&(e.current.splice(r,1),e.emit("exit",t))}),this}},{key:"on",value:function(e,t){return this.handlers[e].push(t),this}},{key:"once",value:function(e,t){return this.singles[e].unshift(t),this}},{key:"emit",value:function(e,t){for(;this.singles[e].length;)this.singles[e].pop()(t);for(var n=this.handlers[e].length;--n>-1;)this.handlers[e][n](t);return this}}]),e}();t.default=function(e,t){return new o(e,t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inViewport=function(e,t){var n=e.getBoundingClientRect(),r=n.top,o=n.right,i=n.bottom,a=n.left,c=n.width,u=n.height,s={t:i,r:window.innerWidth-a,b:window.innerHeight-r,l:o},l={x:t.threshold*c,y:t.threshold*u};return s.t>t.offset.top+l.y&&s.r>t.offset.right+l.x&&s.b>t.offset.bottom+l.y&&s.l>t.offset.left+l.x}},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t,n){var r=n(5),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var r=n(1),o=n(8),i=n(10),a="Expected a function",c=Math.max,u=Math.min;e.exports=function(e,t,n){function s(t){var n=y,r=m;return y=m=void 0,_=t,g=e.apply(r,n)}function l(e){return _=e,b=setTimeout(p,t),k?s(e):g}function f(e){var n=e-_,r=t-(e-x);return S?u(r,w-n):r}function d(e){var n=e-x,r=e-_;return void 0===x||n>=t||n<0||S&&r>=w}function p(){var e=o();return d(e)?h(e):void(b=setTimeout(p,f(e)))}function h(e){return b=void 0,C&&y?s(e):(y=m=void 0,g)}function v(){var e=o(),n=d(e);if(y=arguments,m=this,x=e,n){if(void 0===b)return l(x);if(S)return b=setTimeout(p,t),s(x)}return void 0===b&&(b=setTimeout(p,t)),g}var y,m,w,g,b,x,_=0,k=!1,S=!1,C=!0;if("function"!=typeof e)throw new TypeError(a);return t=i(t)||0,r(n)&&(k=!!n.leading,S="maxWait"in n,w=S?c(i(n.maxWait)||0,t):w,C="trailing"in n?!!n.trailing:C),v.cancel=function(){void 0!==b&&clearTimeout(b),_=0,y=x=m=b=void 0},v.flush=function(){return void 0===b?g:h(o())},v}},function(e,t,n){var r=n(6);e.exports=function(){return r.Date.now()}},function(e,t,n){var r=n(7),o=n(1),i="Expected a function";e.exports=function(e,t,n){var a=!0,c=!0;if("function"!=typeof e)throw new TypeError(i);return o(n)&&(a="leading"in n?!!n.leading:a,c="trailing"in n?!!n.trailing:c),r(e,t,{leading:a,maxWait:t,trailing:c})}},function(e,t){e.exports=function(e){return e}}])})},{}],4:[function(e,t,n){!function(e){var r=!1;if("function"==typeof define&&define.amd&&(define(e),r=!0),"object"==typeof n&&(t.exports=e(),r=!0),!r){var o=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=o,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,i){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},r.defaults,i)).expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*i.expires),i.expires=c}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(e){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],s=/(%[0-9A-Z]{2})+/g,l=0;l<u.length;l++){var f=u[l].split("="),d=f.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var p=f[0].replace(s,decodeURIComponent);if(d=n.read?n.read(d,p):n(d,p)||d.replace(s,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(t===p){a=d;break}t||(a[p]=d)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},{}],5:[function(e,t,n){"use strict";t.exports={origin:"cn-general",method:"GET",reloadDelay:2e4,capturedQueryParams:["mbid"],capturedCookies:[{cookie_key:"amg_user_partner",sparrow_key:"cnid"},{cookie_key:"aam_uuid",sparrow_key:"aam_uuid"}],infinityID:!0,preinit:["infinityid"],autotrack:!1,grid:{granularity:100},scroll:{granularity:400},queue:{sendThreshold:0},heartbeat:{interval:5500},events:[{selector:"window",type:["pageview","timespent","scroll"]},{selector:".mvt-variant",type:["inViewExists"],dataAttrMapper:{appID:"data-cn-application",expID:"data-cn-test",varID:"data-cn-variation"},customMapper:{_c:"variations"}},{parent:".mvt-variant",selector:".mvt-item-link",type:["inViewExists"],dataAttrMapper:{dim1:"href",appID:"data-cn-application",expID:"data-cn-test",varID:"data-cn-variation"},customMapper:{_c:"variations",_t:"linksIn-view"}},{parent:"body",selector:".mvt-item-link",type:["click"],dataAttrMapper:{dim1:"href",appID:"data-cn-application",expID:"data-cn-test",varID:"data-cn-variation"},customMapper:{_c:"variations"}}],url:"//capture.condenastdigital.com/track"}},{}],6:[function(require,module,exports){(function(global){"use strict";function _stringFunctionHelper(str){var inner="("+str+")",internal;try{internal=eval(inner)}catch(e){}return internal}function _urlHelper(){return window.location.origin+window.location.pathname}function _extendHelper(){var e=arguments,t={};if(e&&e[0])for(var n in e)for(var r in e[n])t[r]=e[n][r];return t}function _TrenderHelper(e){var t=arguments,n={},r=[],o=[];if(t&&t[1]){delete t[0];for(var i in t)for(var a in t[i])if("function"==typeof t[i][a])r.push(t[i][a](e,n)),o.push(a);else if(t[i][a]&&t[i][a].indexOf&&0===t[i][a].indexOf("function")){var c=_stringFunctionHelper(t[i][a]);if("function"==typeof c)try{r.push(Promise.resolve(c(e,n))),o.push(a)}catch(e){}}else n[a]=t[i][a]}return new Promise(function(e,t){Promise.all(r).then(function(t){for(var r=0;r<t.length;r++)n[o[r]]=t[r];e(n)}).catch(function(){e(n)})})}function _isFunctionHelper(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function _uuidHelper(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function _flattenObjectHelper(e,t,n){var r=t||{},o=Object(e);for(var i in o){var a=n?[n,i].join(":"):i;"object"===_typeof(e[i])?_flattenObjectHelper(e[i],r,a):e[i]&&(r[a]=e[i])}return r}function _spatialGridHelper(e,t){return Math.round(e/t)*t}function _paramsHelper(e){var t=[];for(var n in e)e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function _ajaxHelper(e){var t=new XMLHttpRequest,n=_extendHelper({withCredentials:!1,method:"GET"},e);return t.withCredentials=n.withCredentials,t.open(n.method,n.url),t.setRequestHeader("Accept","text/plain"),t.send(null),{done:function(e){t.onreadystatechange=function(){4===this.readyState&&e(this.status>=200&&this.status<300?this.responseText:!1)},t.ontimeout=function(){e(!1)},t.onerror=function(){e(!1)}}}}function deviceType(e){function t(e){return e.test(r)}function n(e){return e.exec(r)}if(!e)return{type:"desktop",model:""};var r=e.toLowerCase(),o=["tv","tablet","mobile","desktop"],i={};return t(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(i.type=o[0],i.model="smartTv"):t(/xbox|playstation.3|wii/)?(i.type=o[0],i.model="gameConsole"):t(/ip(a|ro)d/)?(i.type=o[1],i.model="ipad"):t(/tablet/)&&!t(/rx-34/)&&!t(/shield/)||t(/folio/)?(i.type=o[1],i.model=String(n(/playbook/)||"")):t(/linux/)&&t(/android/)&&!t(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(i.type=o[1],i.model="android"):t(/kindle/)||t(/mac.os/)&&t(/silk/)?(i.type=o[1],i.model="kindle"):t(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||t(/mb511/)&&t(/rutem/)?(i.type=o[1],i.model="android"):t(/bb10/)?(i.type=o[2],i.model="blackberry"):(i.model=n(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==i.model?(i.type=o[2],i.model=String(i.model)):(i.model="",t(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?i.type=o[2]:t(/opera/)&&t(/windows.nt.5/)&&t(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?i.type=o[2]:t(/windows.(nt|xp|me|9)/)&&!t(/phone/)||t(/win(9|.9|nt)/)||t(/\(windows 8\)/)?i.type=o[3]:t(/macintosh|powerpc/)&&!t(/silk/)?(i.type=o[3],i.model="mac"):t(/linux/)&&t(/x11/)?i.type=o[3]:t(/solaris|sunos|bsd/)?i.type=o[3]:t(/cros/)?i.type=o[3]:t(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!t(/mobile/)?(i.type=o[3],i.model="crawler"):i.type=o[3])),i}function _lowerAllKeys(e){for(var t,n=Object.keys(e),r=n.length,o={};r--;)o[(t=n[r]).toLowerCase()]=e[t];return o}function pluck(e,t){var n={},r=_lowerAllKeys(e);return t&&Array.isArray(t)&&t.forEach(function(e){var t=e.toLowerCase();r.hasOwnProperty(t)&&(n[t]=r[t])}),n}function rand(){return Date.now()}function root(){return"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"===(void 0===global?"undefined":_typeof(global))&&global.global===global&&global||this}function _dataAttrMapper(e,t){var n={};return t&&e&&e.getAttribute&&Object.keys(t).forEach(function(r){var o=t[r],i=e.getAttribute(o);i&&(n[r]=i)}),n}function _uniqueId(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function _setSid(){try{var e=Cookie.get("sID")||_uuidHelper(),t={expires:.02},n=window.location.host.split(".").reverse();n&&n.length>1&&n[1]&&n[0]&&(t.domain=n[1]+"."+n[0]),Cookie.set("sID",e,t)}catch(e){}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Promise=require("es6-promise").Promise,Cookie=require("js-cookie");module.exports={extend:_extendHelper,exrend:_TrenderHelper,isFunction:_isFunctionHelper,flatten:_flattenObjectHelper,ajax:_ajaxHelper,params:_paramsHelper,gridReduce:_spatialGridHelper,uuid:_uuidHelper,url:_urlHelper,deviceType:deviceType,pluck:pluck,rand:rand,root:root(),dataAttrMapper:_dataAttrMapper,uniqueId:_uniqueId,setSid:_setSid}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"es6-promise":2,"js-cookie":4}],7:[function(e,t,n){"use strict";var r=e("../helpers");t.exports=function(e){var t=e.selector||"",n=e.dataAttrMapper||{},o=[].slice.call(document.querySelectorAll(t));if(o.length>=1){var i=o[0],a=r.dataAttrMapper(i,n);if(a)return{count:o.length,category:a._c}}return{count:o.length,category:""}}},{"../helpers":6}],8:[function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(e("in-view"));t.exports=function(e){var t=e.selector||"",n=document.querySelector(e.parent)||document.body,o=e.onEnter||function(){};if(window.MutationObserver&&!document.querySelector(t)){var i=new MutationObserver(function(e){e.forEach(function(e){if(e.addedNodes)return document.querySelector(t)?((0,r.default)(t).on("enter",function(e){return o(e)}),void i.disconnect()):void 0})});i.observe(n,{childList:!0,subtree:!0,attributes:!1,characterData:!1})}else(0,r.default)(t).on("enter",function(e){return o(e)})}},{"in-view":3}],9:[function(e,t,n){"use strict";function r(t,n){if(!t)return!1;var r={_ts:(new Date).toISOString(),_t:t.type},o=e("../pipeline");for(var i in o)if(o.hasOwnProperty(i)){var a=o[i],u={};c.isFunction(a)&&(u=a(t,n)),r=c.extend(r,u)}return c.exrend(t,r,n.meta,t.meta||t.options||{}).then(function(e){return c.root.SparrowCache.event=r,e})}function o(e,t){return r(e,t).then(function(e){e._c&&e._t&&(u.push(e),u.length>t.queue.sendThreshold&&a(t))})}function i(e,t){var n=new Image,r=c.flatten(e),o=c.params(r);n.src=t.url+"?"+o,setTimeout(function(){n=null},1e3),c.setSid()}function a(e){u.forEach(function(t){i(t,e)}),u=[]}e("js-cookie");var c=e("../helpers"),u=[];t.exports={send:function(e,t){return o(e,t).then(function(){a(t)})}}},{"../helpers":6,"../pipeline":13,"js-cookie":4}],10:[function(e,t,n){"use strict";t.exports=function(e){var t=((e||{}).scroll||{}).granularity||100,n={x:0,y:0};return{depth:function(){var e={x:window.scrollX||window.scrollLeft||0,y:window.scrollY||window.scrollTop||0};return Math.abs(n.x-e.x)>t||Math.abs(n.y-e.y)>t?(n=e,Math.round(e.y/t)*t):0}}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e){function t(){a=(new Date).getTime()}var n=e||{},r=n.activeTimeout||5,o=n.heartbeat||5.5,i=(new Date).getTime(),a=i,c=i,u=0,s=!1;return["focus","mousedown","mouseup","mousemove","scroll","touchstart","touchenter","keyup","keydown"].forEach(function(e){window.addEventListener(e,t,!1)}),setInterval(function(){var e=(new Date).getTime();u+=(s=1e3*r>e-a)?e-c:0,c=e},100),{sendHeartbeat:function(){var e=u/1e3,t=Math.round(e);return u=0,t>0&&e>0&&o+.25>=e?1e3*t:0}}}},{}],12:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(){var e={};try{var t=document.getElementsByTagName("meta"),n={};for(var o in t)try{var i=t[o].getAttribute("property")||t[o].getAttribute("name"),a=t[o].getAttribute("content");n[i]=a}catch(e){}n&&(e.cBr=n["og:site_name"]||"",e.cKe=n.keywords?n.keywords.toLowerCase():"",e.cCh=n.channel||n.Channel||"",e.cSch=n.subchannel||n.Subchannel||"",e.cTi=n["og:title"]||document.title||"",e.cTy=n["og:type"]||"")}catch(e){}if(window&&window._4d&&window._4d.context&&window._4d.context.topics){var c=window._4d.context.topics,u=c.map(function(e){return e.name}),s=c.map(function(e){return e.score});e.cTp=u.join(", "),e.cTpw=s.join(", ")}if(window&&window._4d&&window._4d.context&&window._4d.context.entities){var l=window._4d.context.entities,f=l.map(function(e){return e.name}),d=l.map(function(e){return e.score});e.cEnt=f.join(", "),e.cEnw=d.join(", ")}try{var p=p||window.digitalData||{};Object.keys(p).length>0&&(e.cCu=p.canonical,e.cCl=p.contentLength,e.cTy=p.pageType,e.cEn=p.environment,e.cId=p.contentID,e.cCh=p.section,e.cSch=p.subsection,e.cPd=p.publishDate||"",e.ccS=p.contentSource,e.cPv=p.pageValue,e.cSt=p.searchKeywords,e.cSr=p.numOfSearchResults,e.vTn=p.test,e.vTt=p.variation)}catch(e){}try{var h=document.querySelector('[type="application/ld+json"]');if(h){var v=JSON.parse(h.innerHTML),y=v;Array.isArray(v)&&(y=v.filter(function(e){return"NewsArticle"===e["@type"]})[0]||{});var m=y.author;switch(void 0===m?"undefined":r(m)){case"object":m=Array.isArray(m)?m.map(function(e){return"object"===(void 0===e?"undefined":r(e))&&e.name?e.name:e}):[m.name];break;case"string":m=m.split(",");break;case"undefined":m=[];break;default:m=[]}e.cTi=y.headline||"",e.cPd=y.datePublished||"",e.cAu=m.join(",")}}catch(e){}return e}},{}],13:[function(e,t,n){"use strict";var r=e("./content"),o=e("./page"),i=e("./user");t.exports={content:r,page:o,user:i}},{"./content":12,"./page":14,"./user":15}],14:[function(e,t,n){"use strict";function r(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)}function o(){var e=document;return Math.max(e.body.scrollWidth,e.documentElement.scrollWidth,e.body.offsetWidth,e.documentElement.offsetWidth,e.body.clientWidth,e.documentElement.clientWidth)}function i(e,t){var n=e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{});return c.pluck(n,t)}function a(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"")?"documentElement":"body";return{x:e?window.pageXOffset:document[t].scrollLeft,y:e?window.pageYOffset:document[t].scrollTop}}var c=e("../helpers");t.exports=function(e,t){try{var n=document.createElement("a");n.href=document.referrer;var u=[window.location.protocol,"//",window.location.host,window.location.pathname].join(""),s=[n.protocol,"//",n.host,n.pathname].join(""),l="direct"===(s=u!==s?s:"direct")?"direct":"referral";location.host===n.host&&window.location.pathname!==n.pathname&&(l="internal");var f={};window.location.search&&(f=i(0===window.location.search.indexOf("?")?window.location.search.substr(1):window.location.search,t.capturedQueryParams));var d={};window.location.hash&&(d=i(window.location.hash.substr(1),t.capturedHashParams));var p=null,h=[{key:"www.google",label:"google"},{key:"yahoo.",label:"yahoo"},{key:"bing.",label:"bing"}];return[{key:"facebook",label:"facebook"},{key:"twitter",label:"twitter"},{key:"t.co/",label:"twitter"},{key:"plus.google",label:"google plus"},{key:"instagram",label:"instagram"},{key:"pinterest",label:"pinterest"},{key:"reddit",label:"reddit"},{key:"tumblr",label:"tumblr"}].forEach(function(e){s.indexOf(e.key)>-1&&(l="social",p=e.label)}),h.forEach(function(e){s.indexOf(e.key)>-1&&(l="search",p=e.label)}),c.extend({pHr:u,pRt:l,pRs:p,pHp:location.pathname,pRr:s,pSx:c.gridReduce(a().x,t.grid.granularity),pSy:c.gridReduce(a().y,t.grid.granularity),pWw:c.gridReduce(window.innerWidth,t.grid.granularity),pWh:c.gridReduce(window.innerHeight,t.grid.granularity),pPw:c.gridReduce(o(),t.grid.granularity),pPh:c.gridReduce(r(),t.grid.granularity),pSw:window.screen.width||0,pSh:window.screen.height||0,pAd:document.getElementsByClassName("displayAd").length},f,d)}catch(e){return{}}}},{"../helpers":6}],15:[function(e,t,n){"use strict";var r=e("js-cookie"),o=e("../helpers");t.exports=function(e,t){try{var n=e||{},i=r.get("CN_sp")||o.uuid(),a=r.get("CN_sp")?0:1,c=r.get("pID")||o.uuid(),u=r.get("CN_su")||o.uuid(),s=r.get("CN_su")?0:1;r.set("CN_sp",i),r.set("CN_su",u,{expires:30}),r.set("pID",c);var l={};return(t.capturedCookies||Array.isArray(t.capturedCookies))&&t.capturedCookies.map(function(e){if(e.cookie_key&&e.sparrow_key){var t=Object.create({});return t[e.sparrow_key]=r.get(e.cookie_key),t}return{}}).forEach(function(e){l=o.extend(l,e)}),o.extend({uID:i,uNw:a,uUq:s,sID:r.get("sID"),pID:c,uMx:o.gridReduce(n.x||n.pageX||n.screenX||0,t.grid.granularity),uMy:o.gridReduce(n.y||n.pageY||n.screenX||0,t.grid.granularity),uDt:o.deviceType(window.navigator.userAgent||window.navigator.vendor||window.opera||"").type},l)}catch(n){return{}}}},{"../helpers":6,"js-cookie":4}],16:[function(e,t,n){"use strict";var r=e("../helpers");t.exports=function(e){function t(t,n){--o;var r=JSON.parse(n);window._4d[t]=r,0===o&&e({})}var n=this,o=2;window._4d=window._4d||{},r.ajax({url:"//4d.condenastdigital.com/content?url="+r.url()}).done(t.bind(this,"context")),r.ajax({url:"//infinityid.condenastdigital.com/?rand="+r.rand(),withCredentials:!0}).done(function(e){r.ajax({url:"//4d.condenastdigital.com/user?xid="+e}).done(t.bind(n,"user"))})}},{"../helpers":6}],17:[function(e,t,n){"use strict";var r=e("./4d"),o=e("./infinityid"),i=e("./infinityid-nocache"),a=e("./user-context");t.exports={"4d":r,infinityid:o,"infinityid-nocache":i,"user-context":a}},{"./4d":16,"./infinityid":19,"./infinityid-nocache":18,"./user-context":20}],18:[function(e,t,n){"use strict";var r=e("../helpers");t.exports=function(e){r.ajax({url:"//infinityid.condenastdigital.com/?rand="+r.rand(),withCredentials:!0}).done(function(t){window.SparrowCache=window.SparrowCache||{},window.SparrowCache.xid=t,e({xID:t})})}},{"../helpers":6}],19:[function(e,t,n){"use strict";var r=e("js-cookie"),o=e("../helpers");t.exports=function(e){window.SparrowCache=window.SparrowCache||{};var t=null;try{t=r.get("CN_xid")}catch(e){}t&&"false"!==t&&!1!==t?(window.SparrowCache.xid=t,e({xID:t})):o.ajax({url:"//infinityid.condenastdigital.com/?rand="+o.rand(),withCredentials:!0}).done(function(t){window.SparrowCache.xid=t;try{r.set("CN_xid",t,{expires:18})}catch(e){}e({xID:t})})}},{"../helpers":6,"js-cookie":4}],20:[function(e,t,n){"use strict";var r=e("../helpers"),o=e("./infinityid"),i=e("es6-promise").Promise;t.exports=function(e){window._4d=window._4d||{};var t=new i(function(e){o(function(t){var n=t.xID;n?r.ajax({url:"https://4d.condenastdigital.com/user?xid="+encodeURIComponent(n)}).done(function(t){try{window._4d.user=JSON.parse(t)}catch(e){}e({xID:n})}):(window._4d.user=window._4d.user||{},e())})}),n=new i(function(e){window._4d.context&&Object.keys(window._4d.context).length?e():r.ajax({url:"https://4d.condenastdigital.com/content?url="+encodeURIComponent(r.url())}).done(function(t){try{window._4d.context=JSON.parse(t)}catch(e){}e()})});i.all([t,n]).then(function(t){return e(t[0])}).catch(function(t){console.warn("user context preinit error",t),e({})})}},{"../helpers":6,"./infinityid":19,"es6-promise":2}],21:[function(e,t,n){"use strict";function r(t){function n(e){function t(t,n){var r=e.dataAttrMapper||{},o=e.customMapper||{},i=l.dataAttrMapper(t,r);i&&(n.meta=i),o&&(n.meta=l.extend(n.meta,o)),s.send(n,g)}e.type=e.type[0]?e.type:[e.type];var n=void 0;n=e.parent?[document.querySelector(e.parent)]||[]:Array.prototype.slice.call(document.querySelectorAll(e.selector)),e.type.forEach(function(o){var i={selector:e.selector,type:o};r(g,i)||(b.hasOwnProperty(o)?b[o](i):n.forEach(function(n){r(g,i,n)||n.addEventListener(o,function(n){if(e.parent){for(var r=n.target;r&&r!=this;r=r.parentNode)if(r.matches(e.selector)){t(r,i);break}}else t(n.currentTarget,i)},!1)}))})}function r(e,t,n){var r=e.origin+"/"+t.selector+"/"+t.type;return n&&(r+="/"+l.uniqueId(n.className+n.id+n.localName+n.innerHTML)),l.root.SparrowCache.events.indexOf(r)>-1||(l.root.SparrowCache.events.push(r),!1)}function d(e){var t=e||{};t.meta=e.meta||{},t.autotrack=e.autotrack||!1,t.meta._o=t.meta._o||t.origin||f.origin,t.meta._c=t.meta._c||t.campaign||f.campaign||"general",g=l.extend(f,t),f.capturedCookies&&Array.isArray(f.capturedCookies)&&(g.capturedCookies=f.capturedCookies.concat(t.capturedCookies||[]))}function p(){m=i(),w=u(g)}function h(){try{l.setSid(),l.root.sparrowInitialize||(l.root.sparrowInitialize=!0,o.set("pID",l.uuid()))}catch(e){}}function v(){if(Array.isArray(g.preinit)&&g.preinit.length>0){var t=g.preinit.length;g.preinit.forEach(function(r){e("./preinit")[r](function(e){t--,g.meta=l.extend(g.meta,e),0===t&&g&&g.events&&g.events.forEach(function(e){n(e)})})})}else g&&g.events&&g.events.forEach(function(e){n(e)})}function y(){g.autotrack&&function(e){var t=e.pushState;window.popstateEventProxy||function(n){e.pushState=function(n){return"function"==typeof e.onpushstate&&e.onpushstate({state:n}),t.apply(e,arguments)},window.popstateEventProxy=new function(t){this.event=t,this.isBound=!1,this.bindPopstateEvent=function(){window.addEventListener("popstate",this.event),window.addEventListener("onhashchange",this.event),e.onpushstate=this.event,this.isBound=!0},this.removePopstateEvent=function(){window.removeEventListener("popstate",this.event),e.onpushstate={}}}(n),window.popstateEventProxy.bindPopstateEvent()}(function(){setTimeout(function(){s.send({type:"pageview"},g)},10)})}(window.history)}var m=void 0,w=void 0,g={},b={scroll:function(e){window.addEventListener("scroll",function(){var t=w.depth();t>0&&(e.meta=l.extend(e.meta||{},{_v:t}),s.send(e,g))},!1)},pageview:function(e){s.send(e,g)},inViewExists:function(e){g.events.filter(function(t){return t.type.indexOf(e.type)>=0&&t.selector===e.selector}).forEach(function(t){var n={selector:t.selector,parent:t.parent,onEnter:function(n){var r={};t.dataAttrMapper&&(r=l.dataAttrMapper(n,t.dataAttrMapper)),t.customMapper&&(r=l.extend(r,t.customMapper)),e.meta=l.extend(e.meta||{},{_v:1,_t:"in-view"},r),s.send(e,g)}};c(n)})},elementExists:function(e){g.events.filter(function(t){return t.type.indexOf(e.type)>=0&&t.selector===e.selector}).forEach(function(t){var n=a(t);e.meta=l.extend(e.meta||{},{_v:n.count,_t:"exists",_c:n.category}),s.send(e,g)})},timespent:function(e){setInterval(function(){var t=m.sendHeartbeat();t>0&&(e.meta=l.extend(e.meta||{},{_v:t}),s.send(e,g))},g.heartbeat.interval)}};return function(e){"undefined"!=typeof window&&(d(e),h(),p(),v(),y())}(t),{track:function(e,t,n){var r={type:t,meta:l.extend({_c:e},n)};s.send(r,g)},options:function(){return g},bind:n,trackPageView:function(){s.send({type:"pageview"},g)}}}var o=e("js-cookie"),i=e("./lib/timespent"),a=e("./lib/elementExists"),c=e("./lib/inViewExists"),u=e("./lib/scroll"),s=e("./lib/messenger"),l=e("./helpers"),f=e("./config");l.root.SparrowCache=l.root.SparrowCache||{events:[],pixels:[]},function(){var e=0,t=setInterval(function(){if(l.root.SparrowConfig){var n=l.root.SparrowConfig;return l.root.SparrowCache.pixels.push(new r(n)),void clearInterval(t)}e>f.reloadDelay?clearInterval(t):e+=200},200)}(),t.exports=r},{"./config":5,"./helpers":6,"./lib/elementExists":7,"./lib/inViewExists":8,"./lib/messenger":9,"./lib/scroll":10,"./lib/timespent":11,"./preinit":17,"js-cookie":4}]},{},[21])(21)});
